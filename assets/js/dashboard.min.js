jQuery(function(a){var b=a(".wpcm-dashboard");b&&a.each(b,function(a,b){new WPCM_Dashboard(b)})});var WPCM_Dashboard=function(a){this.is_updating=!1,this.listings=jQuery(a).find(".wpcm-vehicle-results-wrapper>.wpcm-vehicle-results:first"),this.per_page=jQuery(a).data("per_page"),this.load_vehicles()};WPCM_Dashboard.prototype.load_vehicles=function(){if(1!=this.is_updating){this.is_updating=!0;var a=this,b=this.listings,c={nonce:wpcm.nonce_vehicles,per_page:this.per_page};this.listings.parent().append(jQuery("<div>").addClass("wpcm-results-load-overlay")),this.listings.parent().append((new WPCM_Spinner).getDOM()),jQuery.get(wpcm.ajax_url_get_vehicles,c,function(c){b.html(c),b.parent().find(".wpcm-results-load-overlay").remove(),b.parent().find(".wpcm-results-spinner").remove(),a.is_updating=!1})}};var WPCM_Spinner=function(){return this.el=jQuery("<div>").addClass("wpcm-results-spinner").fadeIn(400,WPCM_Spinner.prototype.fadeOut),jQuery(this.el).bind("fade",function(){jQuery(this).fadeOut("slow",function(){jQuery(this).fadeIn("slow",function(){jQuery(this).trigger("fade")})})}),jQuery(this.el).trigger("fade"),this};WPCM_Spinner.prototype.getDOM=function(){return this.el};