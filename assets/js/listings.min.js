jQuery(function(a){var b=a(".wpcm-vehicle-listings");b&&new WPCM_Listings(b)});var WPCM_Listings=function(a){this.filters=jQuery(a).find(".wpcm-vehicle-filters:first"),this.listings=jQuery(a).find(".wpcm-vehicle-results-wrapper>.wpcm-vehicle-results:first"),this.init_filters(),this.load_vehicles()};WPCM_Listings.prototype.init_filters=function(){var a=this;jQuery.each(this.filters.find("select"),function(a,b){jQuery(b).select2({placeholder:jQuery(b).data("placeholder")})}),this.filters.find(".wpcm-filter-make select").change(function(){a.updateModels()}),this.filters.find(".wpcm-filter-button input").click(function(){a.load_vehicles()})},WPCM_Listings.prototype.updateModels=function(){var a=this.filters.find(".wpcm-filter-make select option:selected").val(),b=this.filters.find(".wpcm-filter-model select");if(a>0){var c={nonce:"die komt nog wel",make:a};c[wpcm.ajax_endpoint]="get_models",jQuery.get(wpcm.ajax_url,c,function(a){if(b.attr("disabled",!1).find("option").remove(),void 0!=a&&""!=a&&0!=a&&a.length>0){b.append(jQuery("<option>").val(0).html(b.data("placeholder")));for(var c=0;c<a.length;c++)b.append(jQuery("<option>").val(a[c].id).html(a[c].name))}else b.append(jQuery("<option>").val(0).html(wpcm.lbl_no_models_found));b.select2()})}else b.attr("disabled",!0).find("option").remove().end().append(jQuery("<option>").val(0).html(wpcm.lbl_select_make_first)).select2()},WPCM_Listings.prototype.load_vehicles=function(){var a=this.listings,b={nonce:"die komt nog wel",filters:c},c=[];jQuery.each(this.filters.find(".wpcm-filter select"),function(a,c){var d=jQuery(c).find("option:selected").val();0!=d&&(b[jQuery(c).attr("name")]=d)}),b[wpcm.ajax_endpoint]="get_vehicle_results",console.log(wpcm.ajax_url),jQuery.get(wpcm.ajax_url,b,function(b){a.html(b)})};